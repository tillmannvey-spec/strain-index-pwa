:root {
  --bg: #090909;
  --surface: #111;
  --surface-2: #181818;
  --border: #222;
  --border-light: #2a2a2a;
  --text: #f0f0f0;
  --text-secondary: #777;
  --text-muted: #444;
  --accent: #c8ff00;
  --indica: #a78bfa;
  --sativa: #fbbf24;
  --hybrid: #34d399;
  --danger: #ef4444;
  --radius: 2px;
  --shadow: 0 24px 80px rgba(0,0,0,.6);
}

*{box-sizing:border-box;margin:0}

body{
  min-height:100vh;
  font-family:'IBM Plex Sans',sans-serif;
  color:var(--text);
  background:var(--bg);
  -webkit-font-smoothing:antialiased;
}

/* ── App Shell ── */
.app{
  max-width:1200px;
  margin:0 auto;
  padding:0 20px 40px;
}

/* ── Header ── */
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:32px 0 28px;
  border-bottom:1px solid var(--border);
}

.header h1{
  font-family:'Sora',sans-serif;
  font-weight:800;
  font-size:clamp(1.6rem,3vw + .5rem,2.8rem);
  letter-spacing:-.03em;
  text-transform:uppercase;
  line-height:1;
}

.header h1 span{
  color:var(--text-secondary);
  font-weight:500;
}

.add-btn{
  width:40px;height:40px;
  border-radius:50%;
  border:1px solid var(--border-light);
  background:transparent;
  color:var(--text);
  font-size:1.4rem;
  cursor:pointer;
  display:grid;place-items:center;
  transition:border-color .15s,color .15s;
}
.add-btn:hover{
  border-color:var(--accent);
  color:var(--accent);
}

/* ── Controls ── */
.controls{
  padding:16px 0;
  border-bottom:1px solid var(--border);
}

.search-row{
  display:grid;
  grid-template-columns:1fr auto;
  gap:8px;
}

.filter-panel{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  gap:8px;
  margin-top:10px;
}

input[type="search"],
select{
  width:100%;
  padding:10px 14px;
  border:1px solid var(--border);
  border-radius:var(--radius);
  background:var(--surface);
  color:var(--text);
  font:inherit;
  font-size:.88rem;
}
input[type="search"]:focus,
select:focus{
  outline:none;
  border-color:var(--accent);
}
input[type="search"]::placeholder{
  color:var(--text-muted);
}

.icon-btn{
  width:42px;
  padding:0;
  border:1px solid var(--border);
  border-radius:var(--radius);
  background:var(--surface);
  color:var(--text-secondary);
  cursor:pointer;
  display:grid;place-items:center;
  transition:color .15s,border-color .15s;
}
.icon-btn:hover{
  color:var(--text);
  border-color:var(--border-light);
}

/* ── Grid Header ── */
.grid-header{
  display:flex;
  justify-content:space-between;
  align-items:baseline;
  padding:14px 0;
}

.count{
  font-size:.78rem;
  text-transform:uppercase;
  letter-spacing:.1em;
  color:var(--text-muted);
}

/* ── Strain Grid ── */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(168px,1fr));
  border-top:1px solid var(--border);
  border-left:1px solid var(--border);
}

.card{
  border-right:1px solid var(--border);
  border-bottom:1px solid var(--border);
  padding:16px;
  cursor:pointer;
  transition:background .12s;
  position:relative;
  min-height:80px;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  gap:10px;
}
.card:hover{
  background:var(--surface);
}
.card-active{
  background:var(--surface-2);
}

.card::before{
  content:'';
  position:absolute;
  top:16px;bottom:16px;left:0;
  width:2px;
}
.card[data-type="indica"]::before{background:var(--indica)}
.card[data-type="sativa"]::before{background:var(--sativa)}
.card[data-type="hybrid"]::before{background:var(--hybrid)}

.card-name{
  font-family:'Sora',sans-serif;
  font-weight:700;
  font-size:.88rem;
  line-height:1.2;
  letter-spacing:-.01em;
}

.card-meta{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:.72rem;
  text-transform:uppercase;
  letter-spacing:.06em;
}

.card-thc{
  color:var(--text-secondary);
}

.card-type{
  padding:2px 6px;
  border-radius:var(--radius);
  font-weight:600;
  font-size:.64rem;
  letter-spacing:.08em;
}
.card-type[data-type="indica"]{
  background:rgba(167,139,250,.12);
  color:var(--indica);
}
.card-type[data-type="sativa"]{
  background:rgba(251,191,36,.12);
  color:var(--sativa);
}
.card-type[data-type="hybrid"]{
  background:rgba(52,211,153,.1);
  color:var(--hybrid);
}

.empty-state{
  grid-column:1/-1;
  text-align:center;
  color:var(--text-muted);
  padding:60px 20px;
  font-size:.9rem;
}

/* ── Detail Dialog ── */
.detail-dialog{
  border:1px solid var(--border);
  border-radius:var(--radius);
  width:min(680px,94vw);
  max-height:90vh;
  background:var(--bg);
  color:var(--text);
  padding:0;
  box-shadow:var(--shadow);
}
.detail-dialog::backdrop{
  background:rgba(0,0,0,.75);
  backdrop-filter:blur(4px);
}

.detail-inner{
  display:flex;
  flex-direction:column;
  max-height:90vh;
}

.detail-bar{
  display:flex;
  justify-content:flex-end;
  padding:12px 16px;
  border-bottom:1px solid var(--border);
  flex-shrink:0;
}

.close-btn{
  background:none;
  border:none;
  color:var(--text-secondary);
  cursor:pointer;
  padding:4px;
  display:grid;place-items:center;
  transition:color .15s;
}
.close-btn:hover{color:var(--text)}

.detail-content{
  overflow-y:auto;
  padding:0;
}

/* ── Detail Hero ── */
.detail-hero{
  padding:32px 28px 24px;
  border-bottom:1px solid var(--border);
}

.detail-type{
  display:inline-block;
  padding:3px 8px;
  border-radius:var(--radius);
  font-size:.68rem;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:.1em;
  margin-bottom:12px;
}
.detail-type[data-type="indica"]{
  background:rgba(167,139,250,.12);color:var(--indica);
}
.detail-type[data-type="sativa"]{
  background:rgba(251,191,36,.12);color:var(--sativa);
}
.detail-type[data-type="hybrid"]{
  background:rgba(52,211,153,.1);color:var(--hybrid);
}

.detail-name{
  font-family:'Sora',sans-serif;
  font-weight:800;
  font-size:clamp(1.6rem,4vw,2.4rem);
  letter-spacing:-.03em;
  line-height:1.05;
  margin-bottom:10px;
}

.detail-subtitle{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  color:var(--text-secondary);
  font-size:.84rem;
}

.detail-subtitle .sep{
  color:var(--text-muted);
}

/* ── Detail Actions ── */
.detail-actions{
  display:flex;
  gap:8px;
  padding:12px 28px;
  border-bottom:1px solid var(--border);
}

/* ── Detail Sections ── */
.detail-sections{
  display:grid;
  grid-template-columns:1fr;
}

.detail-section{
  padding:20px 28px;
  border-bottom:1px solid var(--border);
}
.detail-section:last-child{
  border-bottom:none;
}

.detail-section h3{
  font-family:'Sora',sans-serif;
  font-weight:700;
  font-size:.7rem;
  text-transform:uppercase;
  letter-spacing:.14em;
  color:var(--text-muted);
  margin-bottom:12px;
}

.detail-section p{
  color:var(--text-secondary);
  font-size:.88rem;
  line-height:1.55;
  white-space:pre-wrap;
  word-break:break-word;
}
.detail-section p + p{
  margin-top:6px;
}

.detail-section strong{
  color:var(--text);
  font-weight:600;
}

.detail-section ul{
  padding-left:18px;
  color:var(--text-secondary);
  font-size:.88rem;
  line-height:1.55;
}

/* ── Tags ── */
.tag-row{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  margin-bottom:10px;
}

.tag{
  padding:3px 10px;
  border:1px solid var(--border-light);
  border-radius:var(--radius);
  font-size:.76rem;
  color:var(--text-secondary);
  letter-spacing:.02em;
}
.tag-muted{
  border-color:var(--border);
  color:var(--text-muted);
}

/* ── Terpene Table ── */
.terpene-list{
  display:grid;
  gap:1px;
  background:var(--border);
  border:1px solid var(--border);
  border-radius:var(--radius);
}

.terpene-item{
  display:flex;
  justify-content:space-between;
  align-items:baseline;
  padding:10px 14px;
  background:var(--bg);
  font-size:.84rem;
}

.terpene-item strong{
  color:var(--text);
  font-weight:600;
}

.terpene-item span{
  color:var(--text-muted);
  font-size:.78rem;
}

.terpene-effects{
  color:var(--text-muted);
  font-size:.76rem;
  padding:0 14px 8px;
  background:var(--bg);
}

/* ── DL for key-value ── */
.kv-grid{
  display:grid;
  grid-template-columns:auto 1fr;
  gap:4px 16px;
  font-size:.88rem;
}
.kv-grid dt{
  color:var(--text-muted);
}
.kv-grid dd{
  color:var(--text-secondary);
  margin:0;
}

/* ── Modals (shared) ── */
dialog.modal{
  border:1px solid var(--border);
  border-radius:var(--radius);
  width:min(760px,95vw);
  max-height:92vh;
  background:var(--bg);
  color:var(--text);
  padding:0;
  box-shadow:var(--shadow);
}

.compact-modal{
  width:min(380px,92vw);
}

dialog.modal::backdrop{
  background:rgba(0,0,0,.75);
  backdrop-filter:blur(4px);
}

.modal-form{
  display:grid;
  gap:14px;
  padding:20px 24px;
  overflow:auto;
  max-height:92vh;
}

.modal-header,.modal-footer{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
}

.modal-header h2{
  font-family:'Sora',sans-serif;
  font-weight:700;
  font-size:1.05rem;
  letter-spacing:-.02em;
}

.field-grid{
  display:grid;
  grid-template-columns:1fr;
  gap:10px;
}
.field-grid .full{
  grid-column:1/-1;
}

/* ── Forms ── */
input,select,textarea{
  width:100%;
  border-radius:var(--radius);
  border:1px solid var(--border);
  background:var(--surface);
  color:var(--text);
  font:inherit;
  font-size:.88rem;
  padding:10px 14px;
}

textarea{
  resize:none;
  min-height:44px;
}

input:focus,select:focus,textarea:focus{
  outline:none;
  border-color:var(--accent);
}

label{
  display:grid;
  gap:5px;
  color:var(--text-secondary);
  font-size:.82rem;
}

/* ── Buttons ── */
.primary-btn,.ghost-btn{
  border-radius:var(--radius);
  border:1px solid transparent;
  padding:10px 16px;
  font:inherit;
  font-size:.88rem;
  font-weight:600;
  cursor:pointer;
  transition:background .15s,border-color .15s,color .15s;
}

.primary-btn{
  background:var(--accent);
  color:#090909;
  border-color:var(--accent);
}
.primary-btn:hover{
  background:#d4ff33;
}

.ghost-btn{
  background:transparent;
  color:var(--text-secondary);
  border-color:var(--border);
}
.ghost-btn:hover{
  color:var(--text);
  border-color:var(--border-light);
}

.ghost-btn.small{
  padding:6px 12px;
  font-size:.78rem;
  display:inline-flex;
  align-items:center;
  gap:4px;
}

.ghost-btn.danger{
  color:var(--danger);
  border-color:rgba(239,68,68,.3);
}
.ghost-btn.danger:hover{
  border-color:var(--danger);
}

/* ── Checkbox ── */
.checkbox-row{
  grid-template-columns:auto 1fr;
  align-items:center;
}
.checkbox-row input{
  width:18px;height:18px;margin:0;
}

/* ── Status ── */
.status-line{
  min-height:1rem;
  color:var(--text-muted);
  font-size:.84rem;
}
.status-line[data-variant="error"]{color:#fca5a5}
.status-line[data-variant="success"]{color:var(--accent)}
.status-line[data-variant="working"]{color:#fbbf24}

/* ── Terpene/Image/Settings sections in editor ── */
.terpene-section,.image-section,.settings-box{
  display:grid;
  gap:10px;
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:12px;
}

.settings-box summary{
  cursor:pointer;
  font-weight:600;
  font-size:.88rem;
}

.terpene-input-row{
  display:grid;
  grid-template-columns:1fr;
  gap:7px;
}

.preview{
  width:160px;
  border-radius:var(--radius);
  border:1px solid var(--border);
}

/* ── Import Review ── */
.import-review-grid{
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:8px;
  max-height:48vh;
  overflow:auto;
  background:var(--surface);
  display:grid;
  gap:8px;
}

.import-row{
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:10px;
  background:var(--bg);
}

.import-row-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:8px;
  margin-bottom:6px;
}

.import-row h4{
  margin:0;
  font-size:.82rem;
}

.meta-chip{
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:2px 8px;
  font-size:.7rem;
  color:var(--text-muted);
}
.meta-chip.high{color:var(--accent);border-color:rgba(200,255,0,.3)}
.meta-chip.medium{color:#fbbf24;border-color:rgba(251,191,36,.3)}
.meta-chip.low{color:#fca5a5;border-color:rgba(239,68,68,.3)}

.import-value{
  color:var(--text-secondary);
  font-size:.82rem;
  line-height:1.4;
  white-space:pre-wrap;
  word-break:break-word;
}

.import-diff{
  font-size:.74rem;
  color:var(--text-muted);
  line-height:1.35;
}

/* ── Utilities ── */
[hidden]{display:none!important}
.hidden{display:none}

/* ── Animation ── */
@keyframes fadeIn{
  from{opacity:0;transform:translateY(6px)}
  to{opacity:1;transform:translateY(0)}
}

.detail-content{
  animation:fadeIn 200ms ease;
}

/* ── Responsive ── */
@media(max-width:480px){
  .app{padding:0 12px 32px}
  .header{padding:20px 0 16px}
  .grid{grid-template-columns:repeat(auto-fill,minmax(140px,1fr))}
  .card{padding:12px}
  .detail-hero{padding:24px 20px 18px}
  .detail-section{padding:16px 20px}
  .detail-actions{padding:10px 20px}
}

@media(min-width:768px){
  .field-grid{
    grid-template-columns:repeat(2,minmax(0,1fr));
  }
  .terpene-input-row{
    grid-template-columns:1fr 1fr 1.4fr auto;
  }
  .detail-sections{
    grid-template-columns:1fr 1fr;
  }
  .detail-section:nth-last-child(1):nth-child(odd){
    grid-column:1/-1;
  }
}
